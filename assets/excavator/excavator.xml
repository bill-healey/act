<!-- Excavator model

This model implements a classic hydraulic excavator with functioning velocity
actuation and textured meshes.

Copyright, 2023, Vilella Kenny.
-->

<mujoco model="excavator" >

    <compiler meshdir="excavator/mesh" texturedir="excavator/texture"/>

  <default>
    <velocity ctrllimited="true" ctrlrange="-0.5 0.5"/>
    <mesh scale="1 1 1"/>
    <material emission="0.25" rgba="1 1 1 1"/>
  </default>

  <visual>
    <headlight ambient="1 1 1" diffuse="0 0 0" specular="0 0 0"/>
  </visual>

  <asset>
    <mesh file="caterpillar.obj"/>
    <texture name="caterpillar" type="2d" file="caterpillar_texture.png"/>
    <material name="caterpillar" emission="1" texture="caterpillar"/>

    <mesh file="chassis.obj"/>
    <texture name="chassis" type="2d" file="chassis_texture.png"/>
    <material name="chassis" emission="1" texture="chassis"/>

    <mesh file="chassis_boom_tube.obj"/>
    <texture name="chassis cylinder" type="2d" file="chassis_boom_tube_texture.png"/>
    <material name="chassis cylinder" texture="chassis cylinder"/>

    <mesh file="chassis_boom_rod.obj"/>
    <texture name="chassis rod" type="2d" file="chassis_boom_rod_texture.png"/>
    <material name="chassis rod" emission="1" texture="chassis rod"/>

    <mesh file="boom.obj"/>
    <texture name="boom" type="2d" file="boom_texture.png"/>
    <material name="boom" texture="boom" rgba="0.98 0.65 0.15 1"/>

    <mesh file="boom_arm_tube.obj"/>
    <texture name="boom cylinder" type="2d" file="boom_arm_tube_texture.png"/>
    <material name="boom cylinder" texture="boom cylinder"/>

    <mesh file="boom_arm_rod.obj"/>
    <texture name="boom rod" type="2d" file="boom_arm_rod_texture.png"/>
    <material name="boom rod" emission="1" texture="boom rod"/>

    <mesh file="arm.obj" refquat="0.966 0 -0.259 0"/>
    <texture name="arm" type="2d" file="arm_texture.png"/>
    <material name="arm" texture="arm" rgba="0.98 0.65 0.15 1"/>

    <mesh file="arm_h_link_tube.obj"/>
    <texture name="arm cylinder" type="2d" file="arm_h_link_tube_texture.png"/>
    <material name="arm cylinder" texture="arm cylinder"/>

    <mesh file="arm_h_link_rod.obj"/>
    <texture name="arm rod" type="2d" file="arm_h_link_rod_texture.png"/>
    <material name="arm rod" emission="1" texture="arm rod"/>

    <mesh file="h_link.obj"/>
    <texture name="H link" type="2d" file="h_link_texture.png"/>
    <material name="H link" texture="H link"/>

    <mesh file="bucket.obj"/>
    <texture name="bucket" type="2d" file="bucket_texture.png"/>
    <material name="bucket" texture="bucket" rgba="0.3 0.3 0.3 1"/>

    <mesh file="side_link.obj"/>
    <texture name="side link" type="2d" file="side_link_texture.png"/>
    <material name="side link" texture="side link"/>
  </asset>

  <worldbody>
    <body name="caterpillar" pos="0 0 0.040" euler="0 0 0">
      <joint type="free" limited='false' damping="0" stiffness="1" armature="0"/>
      <geom name="caterpillar" type="mesh" mesh="caterpillar" material="caterpillar" pos="0 0 0" euler="0 0 0"/>
      <inertial pos="-0.070 0 0.386" mass="10000" fullinertia="4896 6689 10884 -29 -46 -12"/>

      <body name="chassis" pos="0 0 0.767" euler="0 0 0">
        <joint name="chassis" type="hinge" axis="0 0 1" pos="0 0 0"/>
        <geom name="chassis" type="mesh" mesh="chassis" material="chassis" pos="0 0 0" euler="0 0 0"/>
        <inertial pos="-0.486 -0.150 0.480" mass="10000" fullinertia="6958 13393 17170 -2311 -980 -677"/>

        <body name="boom" pos="0.326 0 0.389" euler="0 -30.0 0">
          <joint name="boom" type="hinge" axis="0 1 0" pos="0 0 0" frictionloss="1000" damping=".1" stiffness="5000"/>
          <geom name="boom" type="mesh" mesh="boom" material="boom" pos="0 0 0" euler="0 0 0"/>
          <inertial pos="1.729 0 0.463" mass="800" fullinertia="87 1768 1690 -0.2 -14 0.02"/>

          <body name="arm" pos="3.845 0 0" euler="0 30.0 0">
            <joint name="arm" type="hinge" axis="0 1 0" pos="0 0 0" frictionloss="1000" damping=".1" stiffness="5000"/>
            <geom name="arm" type="mesh" mesh="arm" material="arm" pos="0 0 0" euler="0 0 0"/>
            <inertial pos="0.476 0 0.119" mass="880" fullinertia="15 302 290 -0.2 23 0.02"/>

            <body name="bucket" pos="1.729 0 -0.998" euler="0 -40.0 0">
              <joint name="bucket" type="hinge" axis="0 1 0" pos="0 0 0" frictionloss="5000" damping="100" stiffness="5000"/>
              <geom name="bucket" type="mesh" mesh="bucket" material="bucket" pos="0 0 0" euler="0 0 0"/>
              <inertial pos="0.231 0 -0.468" mass="300" fullinertia="77 65 55 -0.2 -11 0.02"/>

            </body> <!-- Bucket -->
          </body> <!-- Arm -->
        </body> <!-- Boom -->
      </body> <!-- Chassis -->
    </body> <!-- Caterpillar -->
  </worldbody>
</mujoco>
